import{O as d,C as w,R as q}from"./OptionsColor-1sAB8_Ot.js";import{a8 as m,a1 as z}from"./index-D3FRFp_t.js";class v{constructor(i){this.type="particles",this.container=i}}class D{constructor(){this.blur=5,this.color=new d,this.color.value="#000",this.enable=!1}load(i){i&&(i.blur!==void 0&&(this.blur=i.blur),this.color=d.create(this.color,i.color),i.enable!==void 0&&(this.enable=i.enable))}}class L{constructor(){this.enable=!1,this.frequency=1}load(i){i&&(i.color!==void 0&&(this.color=d.create(this.color,i.color)),i.enable!==void 0&&(this.enable=i.enable),i.frequency!==void 0&&(this.frequency=i.frequency),i.opacity!==void 0&&(this.opacity=i.opacity))}}class M{constructor(){this.blink=!1,this.color=new d,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new D,this.triangles=new L,this.width=1,this.warp=!1}load(i){i&&(i.id!==void 0&&(this.id=i.id),i.blink!==void 0&&(this.blink=i.blink),this.color=d.create(this.color,i.color),i.consent!==void 0&&(this.consent=i.consent),i.distance!==void 0&&(this.distance=i.distance),i.enable!==void 0&&(this.enable=i.enable),i.frequency!==void 0&&(this.frequency=i.frequency),i.opacity!==void 0&&(this.opacity=i.opacity),this.shadow.load(i.shadow),this.triangles.load(i.triangles),i.width!==void 0&&(this.width=i.width),i.warp!==void 0&&(this.warp=i.warp))}}const k=2;class O extends w{constructor(i,e,s,n){super(i,e,s),this.canvasSize=n,this.canvasSize={...n}}contains(i){const{width:e,height:s}=this.canvasSize,{x:n,y:t}=i;return super.contains(i)||super.contains({x:n-e,y:t})||super.contains({x:n-e,y:t-s})||super.contains({x:n,y:t-s})}intersects(i){if(super.intersects(i))return!0;const e=i,s=i,n={x:i.position.x-this.canvasSize.width,y:i.position.y-this.canvasSize.height};if(s.radius!==void 0){const t=new w(n.x,n.y,s.radius*k);return super.intersects(t)}else if(e.size!==void 0){const t=new q(n.x,n.y,e.size.width*k,e.size.height*k);return super.intersects(t)}return!1}}const x=2,P=1,p={x:0,y:0},S=0;function R(c,i,e,s,n){const{dx:t,dy:f,distance:r}=z(c,i);if(!n||r<=e)return r;const l={x:Math.abs(t),y:Math.abs(f)},h={x:Math.min(l.x,s.width-l.x),y:Math.min(l.y,s.height-l.y)};return Math.sqrt(h.x**x+h.y**x)}class _ extends v{constructor(i){super(i),this._setColor=e=>{if(!e.options.links)return;const s=this.linkContainer,n=e.options.links;let t=n.id===void 0?s.particles.linksColor:s.particles.linksColors.get(n.id);if(t)return;const f=n.color;t=m(f,n.blink,n.consent),n.id===void 0?s.particles.linksColor=t:s.particles.linksColors.set(n.id,t)},this.linkContainer=i}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}interact(i){if(!i.options.links)return;i.links=[];const e=i.getPosition(),s=this.container,n=s.canvas.size;if(e.x<p.x||e.y<p.y||e.x>n.width||e.y>n.height)return;const t=i.options.links,f=t.opacity,r=i.retina.linksDistance??S,l=t.warp;let h;l?h=new O(e.x,e.y,r,n):h=new w(e.x,e.y,r);const C=s.particles.quadTree.query(h);for(const o of C){const u=o.options.links;if(i===o||!(u!=null&&u.enable)||t.id!==u.id||o.spawning||o.destroyed||!o.links||i.links.some(y=>y.destination===o)||o.links.some(y=>y.destination===i))continue;const a=o.getPosition();if(a.x<p.x||a.y<p.y||a.x>n.width||a.y>n.height)continue;const b=R(e,a,r,n,l&&u.warp);if(b>r)continue;const g=(P-b/r)*f;this._setColor(i),i.links.push({destination:o,opacity:g})}}isEnabled(i){var e;return!!((e=i.options.links)!=null&&e.enable)}loadParticlesOptions(i,...e){i.links||(i.links=new M);for(const s of e)i.links.load(s==null?void 0:s.links)}reset(){}}export{_ as Linker};
