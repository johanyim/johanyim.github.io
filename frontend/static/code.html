<style>

body {background-color: #11111b; color: #cdd6f4}
.-variable-parameter {color: #eba0ac}
.Type {color: #f9e2af}
.Keyword {color: #cba6f7}
.-spell {}
.-variable-member {color: #b4befe}
.-function-macro {color: #94e2d5}
.Character {color: #94e2d5}
.DiagnosticVirtualTextError {color: #f38ba8; background-color: #32283a}
.Include {color: #cba6f7}
.TodoFgTODO {color: #f2cdcd}
.-module {color: #b4befe}
.String {color: #a6e3a1}
.-punctuation-bracket {color: #9399b2}
.TodoBgTODO {font-weight: bold; color: #11111b; background-color: #f2cdcd}
.-keyword-function {color: #cba6f7}
.Special {color: #f5c2e7}
.DiagnosticUnderlineError {text-decoration-line: underline}
.LspInlayHint {color: #45475a}
.DiagnosticVirtualTextWarn {color: #f9e2af; background-color: #33313a}
.DiagnosticUnderlineHint {text-decoration-line: underline}
.MatchParen {font-weight: bold; color: #fab387; background-color: #45475a}
.Comment {color: #6c7086}
.Delimiter {color: #9399b2}
.-variable {color: #cdd6f4}
.Function {color: #89b4fa}
.DiagnosticVirtualTextHint {color: #94e2d5; background-color: #29313e}
.Operator {color: #89dceb}
</style><pre>
<span class="Include">use</span> <span class="-variable"><span class="-module">std</span></span><span class="Delimiter">::</span><span class="-punctuation-bracket"><span class="DiagnosticUnderlineHint">{</span></span><span class="-variable"><span class="-module"><span class="-module"><span class="Comment">error</span></span><span class="Comment"></span></span><span class="Comment"></span></span><span class="Comment"><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Type">Error</span></span></span></span><span class="-variable"><span class="Type"><span class="Type"></span></span></span><span class="Delimiter">,</span> <span class="-variable">fs</span><span class="Delimiter">,</span> <span class="-variable"><span class="-module"><span class="-module"><span class="Comment">io</span></span><span class="Comment"></span></span><span class="Comment"></span></span><span class="Comment"><span class="Delimiter">::</span><span class="-variable"><span class="Type"><span class="Type">ErrorKind</span></span></span></span><span class="-variable"><span class="Type"><span class="Type"></span></span></span><span class="-punctuation-bracket">}</span><span class="Delimiter">;</span> <span class="Comment"><span class="-spell">// change to io error</span></span>     <span class="DiagnosticVirtualTextWarn">■</span><span class="DiagnosticVirtualTextHint">■</span><span class="DiagnosticVirtualTextWarn">■</span><span class="DiagnosticVirtualTextWarn"> unused imports: `error::Error` and `io::ErrorKind`  `#[warn(unused_imports)]` on by default</span>

<span class="Special">#</span><span class="-punctuation-bracket">[</span><span class="-variable"><span class="-module">rustfmt</span></span><span class="Delimiter">::</span><span class="-variable"><span class="-function-macro">skip</span></span><span class="-punctuation-bracket">]</span>
<span class="-keyword-function">fn</span> <span class="-variable"><span class="Function">list_dotfile_paths</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="Delimiter">-&gt;</span> <span class="Keyword">impl</span> <span class="Type">Iterator</span><span class="Operator"><span class="-punctuation-bracket">&lt;</span></span><span class="Type">Item</span> <span class="Operator">=</span> <span class="Keyword">impl</span> <span class="Type">Iterator</span><span class="Operator"><span class="-punctuation-bracket">&lt;</span></span><span class="Type">Item</span> <span class="Operator">=</span> <span class="Type">String</span><span class="Operator"><span class="-punctuation-bracket">&gt;</span></span><span class="Operator"><span class="-punctuation-bracket">&gt;</span></span> <span class="-punctuation-bracket">{</span>
    <span class="Keyword">let</span> <span class="-variable">dir_name</span> <span class="Operator">=</span> <span class="String">&quot;/home/johan/&quot;</span><span class="Delimiter">;</span> <span class="LspInlayHint">-&gt; &amp;str</span>
    <span class="Keyword">let</span> <span class="-variable">paths</span> <span class="Operator">=</span> <span class="-variable"><span class="-module">fs</span></span><span class="Delimiter">::</span><span class="-variable"><span class="Function">read_dir</span></span><span class="-punctuation-bracket">(</span><span class="-variable">dir_name</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">unwrap</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span> <span class="LspInlayHint">&lt;= (path) -&gt; ReadDir</span>
    <span class="Comment"><span class="-spell">//<span class="TodoBgTODO"> TODO<span class="TodoFgTODO">:</span></span><span class="TodoFgTODO"> Handle error</span></span></span>
    <span class="Keyword">let</span> <span class="-variable">paths</span> <span class="Operator">=</span> <span class="-variable">paths</span> <span class="LspInlayHint">-&gt; impl Iterator&lt;Item = String&gt;, ReadDir</span>
        <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">flatten</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="LspInlayHint">-&gt; impl Iterator&lt;Item = DirEntry&gt;</span>
        <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">filter_map</span></span><span class="-punctuation-bracket">(</span><span class="Keyword">move</span> <span class="Operator"><span class="-punctuation-bracket">|</span></span><span class="-variable"><span class="-variable-parameter">file</span></span><span class="Operator"><span class="-punctuation-bracket">|</span></span> <span class="-punctuation-bracket">{</span> <span class="LspInlayHint">-&gt; DirEntry</span>
            <span class="-variable"><span class="DiagnosticUnderlineHint">file</span></span><span class="DiagnosticUnderlineHint"><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">path</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="LspInlayHint">-&gt; PathBuf</span>     <span class="DiagnosticVirtualTextHint">■</span><span class="DiagnosticVirtualTextHint">  </span>
</span><span class="DiagnosticUnderlineHint">                <span class="Comment"><span class="-spell">// .strip_prefix(dir_name)</span></span>
</span><span class="DiagnosticUnderlineHint">                <span class="Delimiter">.</span></span><span class="Delimiter"></span><span class="-variable-member"><span class="Function"><span class="DiagnosticUnderlineError">ok</span></span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span>     <span class="DiagnosticVirtualTextError">■</span><span class="DiagnosticVirtualTextError"> no method named `ok` found for struct `PathBuf` in the current scope  method not found in `PathBuf`</span>
                <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">and_then</span></span><span class="-punctuation-bracket">(</span><span class="Operator"><span class="-punctuation-bracket">|</span></span><span class="-variable"><span class="-variable-parameter">relative_path</span></span><span class="Operator"><span class="-punctuation-bracket">|</span></span> <span class="-variable">relative_path</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">to_str</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">map</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type"><span class="-module"><span class="Type">String</span></span></span></span><span class="Delimiter">::</span><span class="-variable">from</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span>
        <span class="-punctuation-bracket">}</span><span class="-punctuation-bracket">)</span> <span class="LspInlayHint">-&gt; impl Iterator&lt;Item = String&gt;</span>
        <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">filter</span></span><span class="-punctuation-bracket">(</span><span class="Operator"><span class="-punctuation-bracket">|</span></span><span class="-variable"><span class="-variable-parameter"><span class="DiagnosticUnderlineError">x</span></span></span><span class="Operator"><span class="-punctuation-bracket">|</span></span> <span class="-variable">x</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function"><span class="DiagnosticUnderlineHint">starts_with</span></span></span><span class="-punctuation-bracket">(</span><span class="Character">'.'</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span> <span class="LspInlayHint">-&gt; &amp;String</span>     <span class="DiagnosticVirtualTextError">■</span><span class="DiagnosticVirtualTextHint">■</span><span class="DiagnosticVirtualTextHint">■</span><span class="DiagnosticVirtualTextHint"> consider giving this closure parameter an explicit type, where the type for type parameter `B` is specified: `: &amp;B`</span>

    <span class="Keyword">let</span> <span class="-variable">directories</span> <span class="Operator">=</span> <span class="-variable">dir_name</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">split_inclusive</span></span><span class="-punctuation-bracket">(</span><span class="String">&quot;/&quot;</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">map</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="Type"><span class="-module"><span class="Type">String</span></span></span></span><span class="Delimiter">::</span><span class="-variable">from</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span> <span class="LspInlayHint">-&gt; impl Iterator&lt;Item = String&gt;</span>

    <span class="-variable">paths</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">map</span></span><span class="-punctuation-bracket">(</span><span class="Keyword">move</span> <span class="Operator"><span class="-punctuation-bracket">|</span></span><span class="-variable"><span class="-variable-parameter">path</span></span><span class="Operator"><span class="-punctuation-bracket">|</span></span> <span class="-variable">directories</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">clone</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">chain</span></span><span class="-punctuation-bracket">(</span><span class="-variable"><span class="-module">std</span></span><span class="Delimiter">::</span><span class="-variable"><span class="-module">iter</span></span><span class="Delimiter">::</span><span class="-variable"><span class="Function">once</span></span><span class="-punctuation-bracket">(</span><span class="-variable">path</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span> <span class="LspInlayHint">-&gt; String</span>
<span class="-punctuation-bracket">}</span>

<span class="-keyword-function">fn</span> <span class="-variable"><span class="Function">main</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="-punctuation-bracket"><span class="MatchParen">{</span></span>
    <span class="Keyword">let</span> <span class="-variable">x</span> <span class="Operator">=</span> <span class="-variable"><span class="Function">list_dotfile_paths</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span> <span class="LspInlayHint">-&gt; Vec&lt;Vec&lt;String&gt;&gt;, impl Iterator&lt;Item = impl Iterator&lt;Item = …&gt;&gt;</span>
        <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">map</span></span><span class="-punctuation-bracket">(</span><span class="Operator"><span class="-punctuation-bracket">|</span></span><span class="-variable"><span class="-variable-parameter">i</span></span><span class="Operator"><span class="-punctuation-bracket">|</span></span> <span class="-variable">i</span><span class="Delimiter">.</span><span class="-variable-member"><span class="Function">collect</span></span><span class="Delimiter">::</span><span class="Operator"><span class="-punctuation-bracket">&lt;</span></span><span class="Type">Vec</span><span class="Operator"><span class="-punctuation-bracket">&lt;</span></span><span class="Type">_</span><span class="Operator"><span class="-punctuation-bracket">&gt;</span></span><span class="Operator"><span class="-punctuation-bracket">&gt;</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="-punctuation-bracket">)</span> <span class="LspInlayHint">-&gt; impl Iterator&lt;Item = Vec&lt;String&gt;&gt;, impl Iterator&lt;Item = String&gt;</span>
        <span class="Delimiter">.</span><span class="-variable-member"><span class="Function">collect</span></span><span class="Delimiter">::</span><span class="Operator"><span class="-punctuation-bracket">&lt;</span></span><span class="Type">Vec</span><span class="Operator"><span class="-punctuation-bracket">&lt;</span></span><span class="Type">_</span><span class="Operator"><span class="-punctuation-bracket">&gt;</span></span><span class="Operator"><span class="-punctuation-bracket">&gt;</span></span><span class="-punctuation-bracket">(</span><span class="-punctuation-bracket">)</span><span class="Delimiter">;</span>
    <span class="-variable"><span class="-function-macro">println</span></span><span class="Operator"><span class="-function-macro">!</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">(</span></span><span class="String"><span class="String">&quot;{x:#?}&quot;</span></span><span class="-punctuation-bracket"><span class="-punctuation-bracket">)</span></span><span class="Delimiter">;</span>
<span class="-punctuation-bracket"><span class="MatchParen">}</span></span>
</pre>

